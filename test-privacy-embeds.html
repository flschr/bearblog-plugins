<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Privacy Embeds Test</title>

  <!-- Critical inline blocker - MUST be first -->
  <script>
  console.log('ðŸ”’ Inline blocker starting...');
  (function(){function n(e){const t=e.getAttribute('src');if(t&&t.startsWith('http')&&!e.hasAttribute('data-src')){console.log('ðŸš« Blocking iframe:', t);e.setAttribute('data-src',t);e.removeAttribute('src')}}function i(){document.querySelectorAll('iframe[src]').forEach(n)}const o=new MutationObserver(function(e){for(let t=0;t<e.length;t++){const r=e[t].addedNodes;for(let e=0;e<r.length;e++){const t=r[e];if(t.nodeType===1){if(t.tagName==='IFRAME'){n(t)}const a=t.querySelectorAll&&t.querySelectorAll('iframe[src]');if(a){for(let e=0;e<a.length;e++){n(a[e])}}}}}});o.observe(document.documentElement,{childList:true,subtree:true});i();window._privacyEmbedsObserver=o;console.log('âœ… Inline blocker active')})();
  </script>

  <!-- Main privacy-embeds script -->
  <script src="bear/privacy-embeds.js"></script>

  <style>
    body { font-family: sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
    h1 { color: #333; }
    .test-section { margin: 30px 0; padding: 20px; border: 2px solid #ddd; border-radius: 8px; }
    .media-proxy { background: #f5f5f5; border: 2px dashed #999; padding: 20px; text-align: center; }
    .media-proxy button { background: #007bff; color: white; border: none; padding: 10px 20px; cursor: pointer; font-size: 16px; border-radius: 4px; }
    .media-proxy button:hover { background: #0056b3; }
    iframe { width: 100%; height: 400px; border: 2px solid green; }
    .instructions { background: #fff3cd; padding: 15px; border-left: 4px solid #ffc107; margin-bottom: 20px; }
  </style>
</head>
<body>
  <h1>ðŸ”’ Privacy Embeds Test</h1>

  <div class="instructions">
    <strong>Anleitung zum Testen:</strong>
    <ol>
      <li>Ã–ffnen Sie die Browser-Entwicklertools (F12)</li>
      <li>Gehen Sie zum <strong>Network</strong>-Tab</li>
      <li>Schauen Sie nach Verbindungen zu <code>youtube.com</code> oder <code>youtube-nocookie.com</code></li>
      <li>Es sollten <strong>KEINE</strong> Verbindungen erscheinen, bis Sie auf "Video laden" klicken</li>
      <li>In der Console sollten Sie "ðŸš« Blocking iframe:" Nachrichten sehen</li>
    </ol>
  </div>

  <div class="test-section">
    <h2>Test 1: YouTube Video (Standard)</h2>
    <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" allowfullscreen></iframe>
  </div>

  <div class="test-section">
    <h2>Test 2: YouTube Video (nocookie Domain)</h2>
    <iframe src="https://www.youtube-nocookie.com/embed/dQw4w9WgXcQ" allowfullscreen></iframe>
  </div>

  <div class="test-section">
    <h2>Test 3: Google Maps</h2>
    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2428.4092366126486!2d13.377684315709384!3d52.516071979809065!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47a851c655f20989%3A0x26bbfb4e84674c63!2sBrandenburger%20Tor!5e0!3m2!1sde!2sde!4v1234567890123!5m2!1sde!2sde" allowfullscreen></iframe>
  </div>

  <script>
    // Monitor for any network requests to YouTube domains
    console.log('ðŸ“Š Monitoring for YouTube connections...');
    console.log('If you see any requests to youtube.com or youtube-nocookie.com BEFORE clicking a button, the fix is not working!');
  </script>
</body>
</html>
